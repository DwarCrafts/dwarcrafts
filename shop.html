<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DwarCrafts Marketplace</title>
  <link rel="icon" href="Logo.png" type="image/png" />
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #fdfaf7; color: #333; }
    header { text-align: center; padding: 10px 0; background: #fff8f0; }
    header img { width: 100px; }
    nav { text-align: center; margin: 10px 0; }
    nav a { margin: 0 10px; text-decoration: none; color: #5a3921; font-weight: 600; }
    .category-container { display: flex; flex-wrap: wrap; justify-content: center; padding: 20px; gap: 20px; }
    .category-card { background: #fff7ef; padding: 16px; border-radius: 12px; width: 220px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); cursor: pointer; transition: transform 0.2s; }
    .category-card:hover { transform: scale(1.05); }
    .subcategory-list { display: none; margin-top: 10px; padding-left: 15px; }
    .subcategory-list li { list-style: circle; margin: 5px 0; }
    .product-grid { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; padding: 20px; }
    .product-card { background: white; border-radius: 12px; padding: 10px; width: 180px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    .product-card img { width: 100%; border-radius: 8px; }
    .btn { background: #5a3921; color: white; padding: 8px 12px; border-radius: 8px; text-decoration: none; display: inline-block; margin-top: 5px; }
    .btn:hover { background: #764e2e; }
    footer { background: #f4eade; text-align: center; padding: 20px; font-size: 14px; }
    @media(max-width:600px){.category-card,.product-card{width:90%;}}
  </style>
</head>
<body>

<header>
  <img src="Logo.png" alt="DwarCrafts Logo">
  <nav>
    <a href="index.html">Home</a>
    <a href="generator.html">Order</a>
    <a href="gallery.html">Gallery</a>
    <a href="track.html">Track</a>
    <a href="shop.html">Shop</a>
  </nav>
</header>

<section class="category-container" id="categories"></section>

<section class="product-grid" id="products"></section>

<footer>
  <p>Contact Us:</p>
  <p>ðŸ“± WhatsApp: <a href="https://wa.me/254714129889" target="_blank">0714129889</a></p>
  <p>&copy; 2025 DwarCrafts. All rights reserved.</p>
</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getFirestore, collection, getDocs, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCvZqDkc9ry9WwkT0rvK30-ZvWv_-7vmig",
    authDomain: "dwarcrafts-firebase.firebaseapp.com",
    projectId: "dwarcrafts-firebase",
    storageBucket: "dwarcrafts-firebase.appspot.com",
    messagingSenderId: "91776713343",
    appId: "1:91776713343:web:63fab986c65c7a7800f54a"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const categoriesData = {
    "Bedroom": ["Beds","Wardrobes","Dressers","Nightstands","Vanity Tables","Storage Benches","Other","Customize"],
    "Living Room": ["Sofas","Coffee Tables","Side Tables","TV Stands","Recliners","Bookshelves","Other","Customize"],
    "Dining": ["Dining Tables","Dining Chairs","Buffets","Bar Stools","Cabinets","Wine Racks","Other","Customize"],
    "Office": ["Desks","Office Chairs","Bookshelves","File Cabinets","Conference Tables","Other","Customize"],
    "Outdoor": ["Patio Sets","Benches","Swings","Garden Chairs","Picnic Tables","Other","Customize"],
    "Decor": ["Wall Art","Tabletop","Lighting","Other","Customize"],
    "Resin & Epoxy Art": ["Tables","Wall Art","Decor","Other","Customize"],
    "Calligraphy": ["Styles","Products","Other","Customize"],
    "Crochet": ["Wearables","Home","Accessories","Other","Customize"],
    "Sand Art": ["Bottled Art","Canvas","Decor","Other","Customize"],
    "Aari Work & Embroidery": ["Fashion","Home Decor","Accessories","Other","Customize"],
    "Drawing & Pencil Art": ["Portraits","Scenery","Illustrations","Other","Customize"],
    "Other": ["Other","Customize"]
  };

  const categoriesContainer = document.getElementById("categories");
  const productsContainer = document.getElementById("products");

  for(const cat in categoriesData){
    const catCard = document.createElement("div");
    catCard.className = "category-card";
    catCard.innerHTML = `<strong>${cat}</strong>
      <ul class="subcategory-list">${categoriesData[cat].map(sub=>`<li>${sub}</li>`).join("")}</ul>`;
    catCard.addEventListener("click", ()=> {
      const list = catCard.querySelector(".subcategory-list");
      list.style.display = list.style.display === "block" ? "none" : "block";
    });
    categoriesContainer.appendChild(catCard);
  }

  // Fetch products from Firebase (optional: add filters later)
  async function loadProducts(){
    const productsCol = collection(db,"products");
    const snapshot = await getDocs(productsCol);
    productsContainer.innerHTML = "";
    snapshot.forEach(doc=>{
      const data = doc.data();
      const card = document.createElement("div");
      card.className="product-card";
      card.innerHTML = `
        <img src="${data.image}" alt="${data.name}">
        <strong>${data.name}</strong>
        <p>${data.category} > ${data.subcategory}</p>
        <a class="btn" href="generator.html?category=${encodeURIComponent(data.category)}&subcategory=${encodeURIComponent(data.subcategory)}">Order Now</a>
      `;
      productsContainer.appendChild(card);
    });
  }

  loadProducts();
</script>

</body>
</html>

